interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      If-Match:
      - '*'
      User-Agent:
      - AzureCLI-PCExt/0.2.6
    method: GET
    uri: https://api.partner.microsoft.com/v1.0/ingestion/products?%24filter=externalIDs%2FAny%28i%3Ai%2Ftype+eq+%27AzureOfferId%27+and+i%2Fvalue+eq+%27clitest000001%27%29
  response:
    body:
      string: '{"value":[{"resourceType":"AzureThirdPartyVirtualMachine","name":"clitest000001
        Alias","externalIDs":[{"type":"AzureOfferId","value":"clitest000001"}],"isModularPublishing":true,"id":"047b0828-b67d-4857-b46e-bff41a889f7f"}]}'
    headers:
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Apr 2025 13:24:43 GMT
      request-id:
      - f7d2ad17-e51a-43f2-ad57-5f6d0a6d317e
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-azure-ref:
      - 20250418T132443Z-15bd8fcd597khbdlhC1BL1cm6s0000000bk000000000602e
      x-cache:
      - CONFIG_NOCACHE
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      If-Match:
      - '*'
      User-Agent:
      - AzureCLI-PCExt/0.2.6
    method: GET
    uri: https://api.partner.microsoft.com/v1.0/ingestion/products?%24filter=externalIDs%2FAny%28i%3Ai%2Ftype+eq+%27AzureOfferId%27+and+i%2Fvalue+eq+%27clitest000001%27%29
  response:
    body:
      string: '{"value":[{"resourceType":"AzureThirdPartyVirtualMachine","name":"clitest000001
        Alias","externalIDs":[{"type":"AzureOfferId","value":"clitest000001"}],"isModularPublishing":true,"id":"047b0828-b67d-4857-b46e-bff41a889f7f"}]}'
    headers:
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Apr 2025 13:24:44 GMT
      request-id:
      - 586b466a-d4ff-489d-a553-21f4f7d52d2e
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-azure-ref:
      - 20250418T132444Z-15bd8fcd597khbdlhC1BL1cm6s0000000bk000000000606k
      x-cache:
      - CONFIG_NOCACHE
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      If-Match:
      - '*'
      User-Agent:
      - AzureCLI-PCExt/0.2.6
    method: GET
    uri: https://api.partner.microsoft.com/v1.0/ingestion/products/047b0828-b67d-4857-b46e-bff41a889f7f/setup
  response:
    body:
      string: '{"resourceType":"AzureProductSetup","sellingOption":"ListAndSell","trialUri":"","enableTestDrive":false,"channelStates":[{"type":"Reseller","value":"Disabled"}]}'
    headers:
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Apr 2025 13:24:44 GMT
      request-id:
      - a9847151-3c79-45b0-8e72-94d3fe078273
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-azure-ref:
      - 20250418T132444Z-15bd8fcd597khbdlhC1BL1cm6s0000000bk000000000608y
      x-cache:
      - CONFIG_NOCACHE
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      If-Match:
      - '*'
      User-Agent:
      - AzureCLI-PCExt/0.2.6
    method: GET
    uri: https://api.partner.microsoft.com/v1.0/ingestion/products?%24filter=externalIDs%2FAny%28i%3Ai%2Ftype+eq+%27AzureOfferId%27+and+i%2Fvalue+eq+%27clitest000001%27%29
  response:
    body:
      string: '{"value":[{"resourceType":"AzureThirdPartyVirtualMachine","name":"clitest000001
        Alias","externalIDs":[{"type":"AzureOfferId","value":"clitest000001"}],"isModularPublishing":true,"id":"047b0828-b67d-4857-b46e-bff41a889f7f"}]}'
    headers:
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Apr 2025 13:24:44 GMT
      request-id:
      - b0555e45-a8a6-43b1-9198-38584adb07dc
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-azure-ref:
      - 20250418T132445Z-15bd8fcd597khbdlhC1BL1cm6s0000000bk00000000060b2
      x-cache:
      - CONFIG_NOCACHE
    status:
      code: 200
      message: OK
- request:
    body: '{"resourceType": "AzureProductSetup", "enableTestDrive": true, "sellingOption":
      "ListAndSell", "trialUri": "", "channelStates": [{"type": "Reseller", "value":
      "Disabled"}], "testDriveType": "AzureResourceManager"}'
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/json
      If-Match:
      - '*'
      User-Agent:
      - AzureCLI-PCExt/0.2.6
    method: POST
    uri: https://api.partner.microsoft.com/v1.0/ingestion/products/047b0828-b67d-4857-b46e-bff41a889f7f/setup
  response:
    body:
      string: '"ICH50400 - Unable to complete request. {\"faultCode\":50400,\"reasonPhrase\":\"Request
        validation failed.\",\"correlationId\":\"808f5191-e926-4ba0-b167-d1c0f04ebca8\",\"operationId\":\"1cdfd6fbf1a6b992666e80aa9e781e13\",\"data\":{\"FeatureName\":[\"The
        field FeatureName is invalid.\"]}}"'
    headers:
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Apr 2025 13:24:46 GMT
      request-id:
      - 97001d23-41c5-4019-9ac7-50d3a79a3e11
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-azure-ref:
      - 20250418T132445Z-15bd8fcd597khbdlhC1BL1cm6s0000000bk00000000060fc
      x-cache:
      - CONFIG_NOCACHE
    status:
      code: 400
      message: Bad Request
version: 1
